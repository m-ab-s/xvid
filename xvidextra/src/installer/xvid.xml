<project>
    <shortName>Xvid</shortName>
    <fullName>Xvid Video Codec</fullName>
    <version>15</version>
    <installerFilename>${product_shortname}-${product_version}-${platform_name}.${platform_exec_suffix}</installerFilename>
    <readmeFile>releasenotes.txt</readmeFile>
    <licenseFile>../../LICENSE</licenseFile>
    <logoImage>xvid.png</logoImage>
    <splashImage>xvid_logo.png</splashImage>
    <allowLanguageSelection>1</allowLanguageSelection>
    <componentList>
        <component>
            <name>default</name>
            <description>Default Component</description>
            <canBeEdited>1</canBeEdited>
            <selected>1</selected>
            <show>1</show>
            <folderList>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}</destination>
                    <name>programfiles</name>
                    <platforms>all</platforms>
                    <shortcutList>
                        <shortcut>
                            <comment>Uninstall</comment>
                            <exec>${installdir}/${uninstallerName}</exec>
                            <icon></icon>
                            <name>Uninstall ${product_fullname}</name>
                            <path>${installdir}</path>
                            <platforms>all</platforms>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsExec>${installdir}/${uninstallerName}.exe</windowsExec>
                            <windowsExecArgs></windowsExecArgs>
                            <windowsIcon></windowsIcon>
                            <windowsPath>${installdir}</windowsPath>
                        </shortcut>
                    </shortcutList>
                </folder>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}</destination>
                    <name>programfileslinux</name>
                    <platforms>linux</platforms>
                </folder>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}</destination>
                    <name>programfileswindows</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>../../../xvidcore/vfw/src/xvid.ico</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>AviC.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../LICENSE</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>MiniCalc.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>OGMCalc.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>releasenotes.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>vidccleaner.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>Xvid_Quant_Matrices.zip</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>StatsReader.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>statsreader.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid.inf</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid.ico</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>autoupdate-windows.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>update.ini</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>CheckUpdate.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>MiniConvert.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>XvidWebPlayer.msi</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid-gstreamer-x86-2013.6.msi</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../../xvidcore/build/win32/bin/xvid_encraw.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid_logo.png</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid.png</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvidw.ico</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>CheckUpdate.ps1</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>CheckUpdateLauncher.vbs</origin>
                        </distributionFile>
                    </distributionFileList>
                    <shortcutList>
                        <linkShortcut>
                            <comment>Xvid Website</comment>
                            <icon></icon>
                            <name>xvidhomepage</name>
                            <platforms>windows</platforms>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <url>http://www.xvid.org/</url>
                            <windowsIcon></windowsIcon>
                        </linkShortcut>
                    </shortcutList>
                </folder>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}</destination>
                    <name>programfilesosx</name>
                    <platforms>osx</platforms>
                </folder>
                <folder>
                    <description>Temp Directory (x86)</description>
                    <destination>${system_temp_directory}/xvid_x86</destination>
                    <name>tmp_x86</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>../../../xvidcore/vfw/bin/xvidvfw.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../../xvidcore/vfw/bin/xvidcore.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid.inf</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../../xvidcore/dshow/bin/xvid.ax</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>setpriv32.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../../xvidcore/dshow/bin/xvid_mft.ax</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>setavi32.exe</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>Temp Directory (x64)</description>
                    <destination>${system_temp_directory}/xvid_x64</destination>
                    <name>tmp_x64</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>../../../xvidcore/dshow/bin/x64/xvid.ax</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../../xvidcore/vfw/bin/x64/xvidcore.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../../xvidcore/vfw/bin/x64/xvidvfw.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid.inf</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>setpriv64.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../../xvidcore/dshow/bin/x64/xvid_mft.ax</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>setavi64.exe</origin>
                        </distributionFile>
                    </distributionFileList>
                    <ruleList>
                        <platformTest type="windows-x64"/>
                    </ruleList>
                </folder>
            </folderList>
            <startMenuShortcutList>
                <startMenuShortcut>
                    <comment>Configure the Decoder properties</comment>
                    <name>Decoder Config</name>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${windows_folder_system}/rundll32.exe</windowsExec>
                    <windowsExecArgs>xvid.ax,Configure</windowsExecArgs>
                    <windowsIcon>${installdir}/xvid.ico</windowsIcon>
                    <windowsPath></windowsPath>
                    <ruleList>
                        <platformTest>
                            <type>windows-xp</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-vista</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-9x</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-2003</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-2000</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-7</type>
                        </platformTest>
                    </ruleList>
                </startMenuShortcut>
                <startMenuShortcut>
                    <comment>Configure the Decoder properties</comment>
                    <name>Decoder Config</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${windows_folder_system}/rundll32.exe</windowsExec>
                    <windowsExecArgs>xvid.ax,Configure</windowsExecArgs>
                    <windowsIcon>${installdir}/xvidw.ico</windowsIcon>
                    <windowsPath></windowsPath>
                    <ruleList>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-xp</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-vista</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-9x</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-2003</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-2000</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-7</type>
                        </platformTest>
                    </ruleList>
                </startMenuShortcut>
                <startMenuShortcut>
                    <comment>Configure the encoder properties</comment>
                    <name>Encoder Config</name>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${windows_folder_system}/rundll32.exe</windowsExec>
                    <windowsExecArgs>xvidvfw.dll,Configure</windowsExecArgs>
                    <windowsIcon>${installdir}/xvid.ico</windowsIcon>
                    <windowsPath></windowsPath>
                    <ruleList>
                        <platformTest>
                            <type>windows-xp</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-vista</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-9x</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-2003</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-2000</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-7</type>
                        </platformTest>
                    </ruleList>
                </startMenuShortcut>
                <startMenuShortcut>
                    <comment>Configure the encoder properties</comment>
                    <name>Encoder Config</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${windows_folder_system}/rundll32.exe</windowsExec>
                    <windowsExecArgs>xvidvfw.dll,Configure</windowsExecArgs>
                    <windowsIcon>${installdir}/xvidw.ico</windowsIcon>
                    <windowsPath></windowsPath>
                    <ruleList>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-xp</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-vista</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-9x</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-2003</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-2000</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-7</type>
                        </platformTest>
                    </ruleList>
                </startMenuShortcut>
                <startMenuFileShortcut>
                    <comment>Important notes concerning this Xvid build</comment>
                    <filePath>${installdir}/releasenotes.txt</filePath>
                    <name>Release Notes</name>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsIcon></windowsIcon>
                    <ruleList>
                        <platformTest>
                            <type>windows-xp</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-vista</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-9x</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-2003</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-2000</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-7</type>
                        </platformTest>
                    </ruleList>
                </startMenuFileShortcut>
                <startMenuShortcut>
                    <comment>Check whether a new update for Xvid is available</comment>
                    <name>Check for Updates</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/autoupdate-windows.exe</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon></windowsIcon>
                    <windowsPath>${installdir}/</windowsPath>
                </startMenuShortcut>
                <startMenuLinkShortcut>
                    <comment>Link to the Xvid homepage</comment>
                    <name>Xvid Homepage</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <url>https://www.xvid.com</url>
                    <windowsIcon></windowsIcon>
                </startMenuLinkShortcut>
                <startMenuShortcut>
                    <comment>Command line encoder application</comment>
                    <name>xvid_encraw</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>%comspec%</windowsExec>
                    <windowsExecArgs>/k ""${installdir}\xvid_encraw.exe"" -h</windowsExecArgs>
                    <windowsIcon></windowsIcon>
                    <windowsPath>${installdir}</windowsPath>
                    <ruleList>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-xp</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-vista</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-9x</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-2003</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-2000</type>
                        </platformTest>
                        <platformTest>
                            <negate>1</negate>
                            <type>windows-7</type>
                        </platformTest>
                    </ruleList>
                </startMenuShortcut>
                <startMenuFolder>
                    <name>Advanced</name>
                    <platforms>windows</platforms>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <platformTest>
                            <type>windows-xp</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-vista</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-9x</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-2003</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-2000</type>
                        </platformTest>
                        <platformTest>
                            <type>windows-7</type>
                        </platformTest>
                    </ruleList>
                    <startMenuShortcutList>
                        <startMenuShortcut>
                            <comment>Quickly change the FourCC of your AVI files</comment>
                            <name>Nic's FourCC Changer</name>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsExec>${installdir}/AviC.exe</windowsExec>
                            <windowsExecArgs></windowsExecArgs>
                            <windowsIcon></windowsIcon>
                            <windowsPath>${installdir}/</windowsPath>
                        </startMenuShortcut>
                        <startMenuFileShortcut>
                            <comment>A selection of custom quant matrices</comment>
                            <filePath>${installdir}/Xvid_Quant_Matrices.zip</filePath>
                            <name>Some Quantization Matrices</name>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsIcon></windowsIcon>
                        </startMenuFileShortcut>
                        <startMenuShortcut>
                            <comment>Check the first pass size and more</comment>
                            <name>StatsReader 2.1</name>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsExec>${installdir}/StatsReader.exe</windowsExec>
                            <windowsExecArgs></windowsExecArgs>
                            <windowsIcon></windowsIcon>
                            <windowsPath>${installdir}/</windowsPath>
                        </startMenuShortcut>
                        <startMenuFileShortcut>
                            <comment>Documentation for the StatsReader</comment>
                            <filePath>${installdir}/statsreader.txt</filePath>
                            <name>StatsReader Notes</name>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsIcon></windowsIcon>
                        </startMenuFileShortcut>
                        <startMenuShortcut>
                            <comment>An AVI bitrate calculator</comment>
                            <name>Nic's MiniCalc</name>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsExec>${installdir}/MiniCalc.exe</windowsExec>
                            <windowsExecArgs></windowsExecArgs>
                            <windowsIcon></windowsIcon>
                            <windowsPath>${installdir}/</windowsPath>
                        </startMenuShortcut>
                        <startMenuShortcut>
                            <comment>Command line encoder application</comment>
                            <name>xvid_encraw</name>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsExec>%comspec%</windowsExec>
                            <windowsExecArgs>/k ""${installdir}\xvid_encraw.exe"" -h</windowsExecArgs>
                            <windowsIcon></windowsIcon>
                            <windowsPath>${installdir}</windowsPath>
                        </startMenuShortcut>
                    </startMenuShortcutList>
                </startMenuFolder>
                <startMenuShortcut>
                    <comment>Simple media converter to create Xvid videos</comment>
                    <name>Xvid MiniConvert</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/MiniConvert.exe</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon></windowsIcon>
                    <windowsPath>${installdir}/</windowsPath>
                </startMenuShortcut>
                <startMenuShortcut>
                    <comment>Uninstall ${product_fullname}</comment>
                    <name>Uninstall ${product_fullname}</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/${uninstallerName}.exe</windowsExec>
                    <windowsExecArgs>--debuglevel 3</windowsExecArgs>
                    <windowsIcon>${installdir}/xvidw.ico</windowsIcon>
                    <windowsPath>${installdir}</windowsPath>
                </startMenuShortcut>
            </startMenuShortcutList>
        </component>
    </componentList>
    <initializationActionList>
        <registryGet>
            <key>HKEY_LOCAL_MACHINE\Software\${project.windowsSoftwareRegistryPrefix}</key>
            <name>Location</name>
            <variable>installdir</variable>
            <ruleList>
                <platformTest type="windows"/>
            </ruleList>
        </registryGet>
    </initializationActionList>
    <preInstallationActionList>
        <actionGroup>
            <actionList>
                <setInstallerVariable name="installationType" value="upgrade"/>
            </actionList>
            <ruleList>
                <fileTest condition="exists" path="${installdir}/update.ini"/>
            </ruleList>
        </actionGroup>
    </preInstallationActionList>
    <readyToInstallActionList>
        <runProgram>
            <abortOnError>0</abortOnError>
            <program>${installdir}/unins000.exe</program>
            <programArguments>/VERYSILENT</programArguments>
            <showMessageOnError>0</showMessageOnError>
            <workingDirectory>${installdir}/</workingDirectory>
            <ruleList>
                <fileTest condition="exists" path="${installdir}/unins000.exe"/>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <if>
            <abortOnError>0</abortOnError>
            <showMessageOnError>0</showMessageOnError>
            <actionList>
                <if>
                    <abortOnError>0</abortOnError>
                    <showMessageOnError>0</showMessageOnError>
                    <actionList>
                        <if>
                            <abortOnError>0</abortOnError>
                            <showMessageOnError>0</showMessageOnError>
                            <actionList>
                                <setInstallerVariable>
                                    <abortOnError>0</abortOnError>
                                    <name>generic_mpeg4</name>
                                    <showMessageOnError>0</showMessageOnError>
                                    <value>7</value>
                                </setInstallerVariable>
                            </actionList>
                            <conditionRuleList>
                                <compareValues>
                                    <logic>equals</logic>
                                    <negate>1</negate>
                                    <value1>${decode_other}</value1>
                                    <value2>0</value2>
                                </compareValues>
                            </conditionRuleList>
                            <elseActionList>
                                <setInstallerVariable>
                                    <abortOnError>0</abortOnError>
                                    <name>generic_mpeg4</name>
                                    <showMessageOnError>0</showMessageOnError>
                                    <value>3</value>
                                </setInstallerVariable>
                            </elseActionList>
                        </if>
                    </actionList>
                    <conditionRuleList>
                        <compareValues>
                            <logic>equals</logic>
                            <negate>1</negate>
                            <value1>${decode_3ivx}</value1>
                            <value2>0</value2>
                        </compareValues>
                    </conditionRuleList>
                    <elseActionList>
                        <if>
                            <abortOnError>0</abortOnError>
                            <showMessageOnError>0</showMessageOnError>
                            <actionList>
                                <setInstallerVariable>
                                    <abortOnError>0</abortOnError>
                                    <name>generic_mpeg4</name>
                                    <showMessageOnError>0</showMessageOnError>
                                    <value>6</value>
                                </setInstallerVariable>
                            </actionList>
                            <conditionRuleList>
                                <compareValues>
                                    <logic>equals</logic>
                                    <negate>1</negate>
                                    <value1>${decode_other}</value1>
                                    <value2>0</value2>
                                </compareValues>
                            </conditionRuleList>
                            <elseActionList>
                                <setInstallerVariable>
                                    <abortOnError>0</abortOnError>
                                    <name>generic_mpeg4</name>
                                    <showMessageOnError>0</showMessageOnError>
                                    <value>2</value>
                                </setInstallerVariable>
                            </elseActionList>
                        </if>
                    </elseActionList>
                </if>
            </actionList>
            <conditionRuleList>
                <compareValues>
                    <logic>equals</logic>
                    <negate>1</negate>
                    <value1>${decode_divx}</value1>
                    <value2>0</value2>
                </compareValues>
            </conditionRuleList>
            <elseActionList>
                <if>
                    <abortOnError>0</abortOnError>
                    <showMessageOnError>0</showMessageOnError>
                    <actionList>
                        <if>
                            <abortOnError>0</abortOnError>
                            <showMessageOnError>0</showMessageOnError>
                            <actionList>
                                <setInstallerVariable>
                                    <abortOnError>0</abortOnError>
                                    <name>generic_mpeg4</name>
                                    <showMessageOnError>0</showMessageOnError>
                                    <value>5</value>
                                </setInstallerVariable>
                            </actionList>
                            <conditionRuleList>
                                <compareValues>
                                    <logic>equals</logic>
                                    <negate>1</negate>
                                    <value1>${decode_other}</value1>
                                    <value2>0</value2>
                                </compareValues>
                            </conditionRuleList>
                            <elseActionList>
                                <setInstallerVariable>
                                    <abortOnError>0</abortOnError>
                                    <name>generic_mpeg4</name>
                                    <showMessageOnError>0</showMessageOnError>
                                    <value>1</value>
                                </setInstallerVariable>
                            </elseActionList>
                        </if>
                    </actionList>
                    <conditionRuleList>
                        <compareValues>
                            <logic>equals</logic>
                            <negate>1</negate>
                            <value1>${decode_3IVX}</value1>
                            <value2>0</value2>
                        </compareValues>
                    </conditionRuleList>
                    <elseActionList>
                        <if>
                            <abortOnError>0</abortOnError>
                            <showMessageOnError>0</showMessageOnError>
                            <actionList>
                                <setInstallerVariable>
                                    <abortOnError>0</abortOnError>
                                    <name>generic_mpeg4</name>
                                    <showMessageOnError>0</showMessageOnError>
                                    <value>4</value>
                                </setInstallerVariable>
                            </actionList>
                            <conditionRuleList>
                                <compareValues>
                                    <logic>equals</logic>
                                    <negate>1</negate>
                                    <value1>${decode_other}</value1>
                                    <value2>0</value2>
                                </compareValues>
                            </conditionRuleList>
                            <elseActionList>
                                <setInstallerVariable>
                                    <abortOnError>0</abortOnError>
                                    <name>generic_mpeg4</name>
                                    <showMessageOnError>0</showMessageOnError>
                                    <value>0</value>
                                </setInstallerVariable>
                            </elseActionList>
                        </if>
                    </elseActionList>
                </if>
            </elseActionList>
        </if>
    </readyToInstallActionList>
    <postInstallationActionList>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${system_temp_directory}/xvid_x86/xvid.ax</destination>
            <origin>${system_temp_directory}/xvid_x86/xvid_mft.ax</origin>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <fileExists>
                    <path>${windows_folder_system}/mfplat.dll</path>
                </fileExists>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_system}/xvid.ax</destination>
            <origin>${system_temp_directory}/xvid_x86/xvid.ax</origin>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_system}/xvidcore.dll</destination>
            <origin>${system_temp_directory}/xvid_x86/xvidcore.dll</origin>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_system}/xvidvfw.dll</destination>
            <origin>${system_temp_directory}/xvid_x86/xvidvfw.dll</origin>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <runProgram>
            <customErrorMessage>Failed to install Xvid VfW Codec (32-bit)!</customErrorMessage>
            <program>${windows_folder_system}/rundll32.exe</program>
            <programArguments>setupapi.dll,InstallHinfSection DefaultInstall 0 ${system_temp_directory}/xvid_x86/xvid.inf</programArguments>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <runProgram>
            <customErrorMessage>DirectShow filter (32-bit) register failed!</customErrorMessage>
            <program>${windows_folder_system}/regsvr32.exe</program>
            <programArguments>/s ${windows_folder_system}/xvid.ax</programArguments>
            <workingDirectory>${windows_folder_system}</workingDirectory>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>Description</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>Xvid MPEG-4 Video Codec</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>Driver</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>xvidvfw.dll</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>FriendlyName</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>XVID</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\drivers.desc</key>
            <name>xvidvfw.dll</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>Xvid MPEG-4 Video Codec</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Drivers32</key>
            <name>vidc.XVID</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>xvidvfw.dll</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Drivers32</key>
            <name>msacm.l3acm</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>l3codecp.acm</value>
            <wowMode>32</wowMode>
            <ruleList>
                <fileExists>
                    <path>${windows_folder_system}/l3codecp.acm</path>
                </fileExists>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\drivers.desc</key>
            <name>l3codecp.acm</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>Fraunhofer IIS MPEG Layer-3 Codec (professional)</value>
            <wowMode>32</wowMode>
            <ruleList>
                <fileExists>
                    <path>${windows_folder_system}/l3codecp.acm</path>
                </fileExists>
            </ruleList>
        </registrySet>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\drivers.desc</key>
            <name>l3codeca.acm</name>
            <showMessageOnError>0</showMessageOnError>
            <wowMode>32</wowMode>
            <ruleList>
                <fileExists>
                    <path>${windows_folder_system}/l3codecp.acm</path>
                </fileExists>
            </ruleList>
        </registryDelete>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\drivers.desc</key>
            <name>C:\Windows\System32\l3codeca.acm</name>
            <showMessageOnError>0</showMessageOnError>
            <wowMode>32</wowMode>
            <ruleList>
                <fileExists>
                    <path>${windows_folder_system}/l3codecp.acm</path>
                </fileExists>
                <platformTest>
                    <type>windows-x86</type>
                </platformTest>
            </ruleList>
        </registryDelete>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\msacm\msacm.l3acm</key>
            <name>Driver</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>l3codecp.acm</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-2003</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <fileExists>
                    <path>${windows_folder_system}/l3codecp.acm</path>
                </fileExists>
            </ruleList>
        </registrySet>
        <showWarning>
            <abortOnError>0</abortOnError>
            <showMessageOnError>0</showMessageOnError>
            <text>Xvid MiniConvert will run only in feature-restricted mode!

Reason: Your installed version of Windows Media Player is too old! To make full use of Xvid MiniConvert, please update your Windows Media Player to Version 11 or higher and re-run the Xvid installer.</text>
            <ruleList>
                <fileExists>
                    <negate>1</negate>
                    <path>${windows_folder_system}/l3codecp.acm</path>
                </fileExists>
            </ruleList>
        </showWarning>
        <wow64FsRedirection>
            <action>disable</action>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </wow64FsRedirection>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\drivers.desc</key>
            <name>C:\Windows\SysWOW64\l3codeca.acm</name>
            <showMessageOnError>0</showMessageOnError>
            <wowMode>32</wowMode>
            <ruleList>
                <fileExists>
                    <path>${windows_folder_system}/l3codecp.acm</path>
                </fileExists>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registryDelete>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${system_temp_directory}/xvid_x64/xvid.ax</destination>
            <origin>${system_temp_directory}/xvid_x64/xvid_mft.ax</origin>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <fileExists>
                    <path>${windows_folder_windows}/system32/mfplat.dll</path>
                </fileExists>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_windows}/system32/xvid.ax</destination>
            <origin>${system_temp_directory}/xvid_x64/xvid.ax</origin>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_windows}/system32/xvidcore.dll</destination>
            <origin>${system_temp_directory}/xvid_x64/xvidcore.dll</origin>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_windows}/system32/xvidvfw.dll</destination>
            <origin>${system_temp_directory}/xvid_x64/xvidvfw.dll</origin>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <runProgram>
            <customErrorMessage>Failed to install Xvid VfW Codec (64-bit)!</customErrorMessage>
            <program>${windows_folder_windows}/system32/rundll32.exe</program>
            <programArguments>setupapi.dll,InstallHinfSection DefaultInstall 0 ${system_temp_directory}/xvid_x64/xvid.inf</programArguments>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <runProgram>
            <customErrorMessage>DirectShow filter (64-bit) register failed!</customErrorMessage>
            <program>${windows_folder_windows}/system32/regsvr32.exe</program>
            <programArguments>/s ${windows_folder_windows}/system32/xvid.ax</programArguments>
            <workingDirectory>${windows_folder_windows}/system32</workingDirectory>
            <ruleList>
                <platformTest type="windows-x64"/>
            </ruleList>
        </runProgram>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>Description</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>Xvid MPEG-4 Video Codec</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>Driver</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>xvidvfw.dll</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>FriendlyName</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>XVID</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\drivers.desc</key>
            <name>xvidvfw.dll</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>Xvid MPEG-4 Video Codec</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Drivers32</key>
            <name>vidc.XVID</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>xvidvfw.dll</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <runProgram>
            <abortOnError>0</abortOnError>
            <program>${system_temp_directory}/xvid_x86/setpriv32.exe</program>
            <programArguments></programArguments>
            <showMessageOnError>0</showMessageOnError>
            <workingDirectory>${system_temp_directory}/xvid_x86</workingDirectory>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-vista</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-9x</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2003</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <runProgram>
            <abortOnError>0</abortOnError>
            <program>${system_temp_directory}/xvid_x64/setpriv64.exe</program>
            <programArguments></programArguments>
            <showMessageOnError>0</showMessageOnError>
            <workingDirectory>${system_temp_directory}/xvid_x64</workingDirectory>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-vista</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-9x</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2003</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <registrySet>
            <key>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run</key>
            <name>Xvid</name>
            <type>REG_SZ</type>
            <value>WScript "${installdir}\CheckUpdateLauncher.vbs" "${installdir}\CheckUpdate.ps1"</value>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <compareText logic="equals" text="${AutoUpdate}" value="yes"/>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>58564944</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_DWORD</type>
            <value>1482049860</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>58564944</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_DWORD</type>
            <value>1482049860</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>78766964</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_DWORD</type>
            <value>2021026148</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>78766964</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_DWORD</type>
            <value>2021026148</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DirectShow\Preferred</key>
            <name>{44495658-0000-0010-8000-00AA00389B71}</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>{083863F1-70DE-11D0-BD40-00A0C911CE86}</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DirectShow\Preferred</key>
            <name>{64697678-0000-0010-8000-00AA00389B71}</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>{083863F1-70DE-11D0-BD40-00A0C911CE86}</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-vista</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-9x</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2003</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DirectShow\Preferred</key>
            <name>{44495658-0000-0010-8000-00AA00389B71}</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>{083863F1-70DE-11D0-BD40-00A0C911CE86}</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-vista</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-9x</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2003</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DirectShow\Preferred</key>
            <name>{64697678-0000-0010-8000-00AA00389B71}</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>{083863F1-70DE-11D0-BD40-00A0C911CE86}</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-vista</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-9x</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2003</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <createShortcuts>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_common_programs}/${product_shortname}</destination>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <compareValues>
                    <logic>equals</logic>
                    <value1>${installationType}</value1>
                    <value2>upgrade</value2>
                </compareValues>
            </ruleList>
            <shortcutList>
                <quickLaunchShortcut>
                    <comment>Simple media converter to create Xvid videos</comment>
                    <name>Xvid MiniConvert</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/MiniConvert.exe</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon></windowsIcon>
                    <windowsPath>${installdir}/</windowsPath>
                </quickLaunchShortcut>
            </shortcutList>
        </createShortcuts>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_CLASSES_ROOT\Media Type\Extensions\.avi</key>
            <name></name>
            <showMessageOnError>0</showMessageOnError>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registryDelete>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_CLASSES_ROOT\Media Type\Extensions\.avi</key>
            <name></name>
            <showMessageOnError>0</showMessageOnError>
            <wowMode>32</wowMode>
        </registryDelete>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_CLASSES_ROOT\Media Type\Extensions\.avi</key>
            <name></name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_NONE</type>
            <value></value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_CLASSES_ROOT\Media Type\Extensions\.avi</key>
            <name></name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_NONE</type>
            <value></value>
            <wowMode>32</wowMode>
        </registrySet>
        <runProgram>
            <abortOnError>0</abortOnError>
            <program>${system_temp_directory}/xvid_x86/setavi32.exe</program>
            <programArguments></programArguments>
            <show>0</show>
            <showMessageOnError>0</showMessageOnError>
            <workingDirectory>${system_temp_directory}/xvid_x86</workingDirectory>
        </runProgram>
        <runProgram>
            <abortOnError>0</abortOnError>
            <program>${system_temp_directory}/xvid_x64/setavi64.exe</program>
            <programArguments></programArguments>
            <show>0</show>
            <showMessageOnError>0</showMessageOnError>
            <workingDirectory>${system_temp_directory}/xvid_x64</workingDirectory>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <path>${system_temp_directory}/xvid_x64</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <path>${system_temp_directory}/xvid_x86</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_CURRENT_USER\Software\GNU\XviD</key>
            <name>Supported_4CC</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_DWORD</type>
            <value>${generic_mpeg4}</value>
        </registrySet>
        <runProgram>
            <program>${windows_folder_system}\msiexec.exe</program>
            <programArguments>/passive /i "${installdir.dos}\xvid-gstreamer-x86-2013.6.msi" "INSTALLDIR=${installdir.dos}\xvid-gstreamer"</programArguments>
            <show>0</show>
            <useMSDOSPath>0</useMSDOSPath>
        </runProgram>
        <runProgram>
            <explanation>Installing Xvid Web Player</explanation>
            <program>${windows_folder_system}\msiexec.exe</program>
            <programArguments>/passive /I "${installdir.dos}\XvidWebPlayer.msi" "INSTALLDIR=${installdir.dos}\xvid-gstreamer\0.10\x86\bin"</programArguments>
            <show>0</show>
            <useMSDOSPath>0</useMSDOSPath>
        </runProgram>
        <addDirectoryToPath>
            <insertAt>end</insertAt>
            <path>${installdir}\xvid-gstreamer\0.10\x86\bin</path>
        </addDirectoryToPath>
    </postInstallationActionList>
    <preUninstallationActionList>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>58564944</name>
            <type>REG_DWORD</type>
            <value>1446269005</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-9x</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2003</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-vista</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>78766964</name>
            <type>REG_DWORD</type>
            <value>1446269005</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-vista</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-9x</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2003</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>58564944</name>
            <type>REG_DWORD</type>
            <value>1446269005</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-vista</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2003</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-9x</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>78766964</name>
            <type>REG_DWORD</type>
            <value>1446269005</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-vista</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-9x</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2003</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <runProgram>
            <customErrorMessage>DirectShow filter (32-bit) unregister failed!</customErrorMessage>
            <program>${windows_folder_system}/regsvr32.exe</program>
            <programArguments>/s /u ${windows_folder_system}/xvid.ax</programArguments>
            <workingDirectory>${windows_folder_system}</workingDirectory>
            <ruleList>
                <platformTest type="windows"/>
            </ruleList>
        </runProgram>
        <runProgram>
            <customErrorMessage>Failed to remove Xvid VfW Codec (32-bit)!</customErrorMessage>
            <program>${windows_folder_system}/rundll32.exe</program>
            <programArguments>setupapi.dll,InstallHinfSection Remove_XviD 132 ${windows_folder_windows}/inf/xvid.inf</programArguments>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_system}/xvid.ax</path>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_system}/xvidvfw.dll</path>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_system}/xvidcore.dll</path>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Drivers32</key>
            <name>msacm.l3acm</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>l3codeca.acm</value>
            <wowMode>32</wowMode>
            <ruleList>
                <fileExists>
                    <path>${windows_folder_system}/l3codeca.acm</path>
                </fileExists>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\drivers.desc</key>
            <name>l3codeca.acm</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>Fraunhofer IIS MPEG Layer-3 Codec</value>
            <wowMode>32</wowMode>
            <ruleList>
                <fileExists>
                    <path>${windows_folder_system}/l3codeca.acm</path>
                </fileExists>
            </ruleList>
        </registrySet>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\drivers.desc</key>
            <name>l3codecp.acm</name>
            <showMessageOnError>0</showMessageOnError>
            <wowMode>32</wowMode>
            <ruleList>
                <fileExists>
                    <path>${windows_folder_system}/l3codeca.acm</path>
                </fileExists>
            </ruleList>
        </registryDelete>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\msacm\msacm.l3acm</key>
            <name>Driver</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>l3codeca.acm</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-2003</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <fileExists>
                    <path>${windows_folder_system}/l3codeca.acm</path>
                </fileExists>
            </ruleList>
        </registrySet>
        <wow64FsRedirection>
            <action>disable</action>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </wow64FsRedirection>
        <runProgram>
            <customErrorMessage>DirectShow filter (64-bit) unregister failed!</customErrorMessage>
            <program>${windows_folder_windows}/system32/regsvr32.exe</program>
            <programArguments>/s /u ${windows_folder_windows}/system32/xvid.ax</programArguments>
            <workingDirectory>${windows_folder_windows}/system32</workingDirectory>
            <ruleList>
                <platformTest type="windows-x64"/>
            </ruleList>
        </runProgram>
        <runProgram>
            <customErrorMessage>Failed to remove Xvid VfW Codec (64-bit)!</customErrorMessage>
            <program>${windows_folder_windows}/system32/rundll32.exe</program>
            <programArguments>setupapi.dll,InstallHinfSection Remove_XviD 132 ${installdir}/xvid.inf</programArguments>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_windows}/system32/xvid.ax</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_windows}/system32/xvidvfw.dll</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_windows}/system32/xvidcore.dll</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <runProgram>
            <program>${windows_folder_system}\msiexec.exe</program>
            <programArguments>/passive /x "${installdir.dos}\XvidWebPlayer.msi" "INSTALLDIR=${installdir.dos}\xvid-gstreamer\0.10\x86\bin"</programArguments>
            <useMSDOSPath>0</useMSDOSPath>
        </runProgram>
        <runProgram>
            <program>${windows_folder_system}\msiexec.exe</program>
            <programArguments>/passive /x "${installdir.dos}\xvid-gstreamer-x86-2013.6.msi" "INSTALLDIR=${installdir.dos}\xvid-gstreamer"</programArguments>
            <useMSDOSPath>0</useMSDOSPath>
        </runProgram>
        <removeDirectoryFromPath>
            <path>${installdir}\xvid-gstreamer\0.10\x86\bin</path>
        </removeDirectoryFromPath>
    </preUninstallationActionList>
    <postUninstallationActionList>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run</key>
            <name>Xvid</name>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </registryDelete>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <path>${windows_folder_common_programs}/${product_shortname}</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </deleteFile>
    </postUninstallationActionList>
    <compressionAlgorithm>lzma</compressionAlgorithm>
    <enableRollback>1</enableRollback>
    <enableTimestamp>1</enableTimestamp>
    <requireInstallationByRootUser>1</requireInstallationByRootUser>
    <saveRelativePaths>1</saveRelativePaths>
    <startMenuGroupName>${product_shortname}</startMenuGroupName>
    <vendor>Xvid Team</vendor>
    <windowsExecutableIcon>xvid.ico</windowsExecutableIcon>
    <windowsResourceFileVersion>1.4.0.0</windowsResourceFileVersion>
    <windowsResourceOriginalFilename>${product_shortname}-${product_version}-${platform_name}.${platform_exec_suffix}</windowsResourceOriginalFilename>
    <parameterList>
        <directoryParameter>
            <name>installdir</name>
            <description>Installer.Parameter.installdir.description</description>
            <explanation>Installer.Parameter.installdir.explanation</explanation>
            <value></value>
            <default>${platform_install_prefix}/${product_shortname}</default>
            <allowEmptyValue>0</allowEmptyValue>
            <cliOptionName>prefix</cliOptionName>
            <mustBeWritable>1</mustBeWritable>
            <mustExist>0</mustExist>
            <width>40</width>
        </directoryParameter>
        <choiceParameter>
            <name>AutoUpdater</name>
            <title>Update Settings</title>
            <description></description>
            <explanation>Do you want to automatically check for updates?</explanation>
            <value></value>
            <default>yes</default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>yes</ask>
            <displayType>radiobuttons</displayType>
            <ordering>default</ordering>
            <width>40</width>
            <optionList>
                <option>
                    <description></description>
                    <image></image>
                    <text>Yes, automatically notify me when updates are available.</text>
                    <value>yes</value>
                </option>
                <option>
                    <description></description>
                    <image></image>
                    <text>No, I want to check for updates manually.</text>
                    <value>no</value>
                </option>
            </optionList>
            <postShowPageActionList>
                <setInstallerVariable>
                    <name>AutoUpdate</name>
                    <value>${AutoUpdater}</value>
                </setInstallerVariable>
            </postShowPageActionList>
            <ruleList>
                <registryTest>
                    <key>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run</key>
                    <logic>does_not_exist</logic>
                    <name>Xvid</name>
                </registryTest>
            </ruleList>
        </choiceParameter>
        <parameterGroup>
            <name>decoder_configuration</name>
            <title>Decoder Configuration</title>
            <explanation>Use Xvid to play back also the following media types:</explanation>
            <value></value>
            <default></default>
            <parameterList>
                <booleanParameter>
                    <name>decode_divx</name>
                    <title>DIVX</title>
                    <description>DIVX</description>
                    <explanation></explanation>
                    <value></value>
                    <default></default>
                    <displayStyle>checkbox-left</displayStyle>
                </booleanParameter>
                <booleanParameter>
                    <name>decode_3ivx</name>
                    <title>3IVX</title>
                    <description>3IVX</description>
                    <explanation></explanation>
                    <value></value>
                    <default></default>
                    <displayStyle>checkbox-left</displayStyle>
                </booleanParameter>
                <booleanParameter>
                    <name>decode_other</name>
                    <title>Other MPEG-4</title>
                    <description>Other MPEG-4</description>
                    <explanation></explanation>
                    <value></value>
                    <default></default>
                    <displayStyle>checkbox-left</displayStyle>
                </booleanParameter>
            </parameterList>
            <ruleList>
                <fileExists>
                    <negate>1</negate>
                    <path>${installdir}/update.ini</path>
                </fileExists>
            </ruleList>
        </parameterGroup>
    </parameterList>
    <platformOptionsList>
        <platformOptions>
            <platform>windows</platform>
        </platformOptions>
    </platformOptionsList>
</project>

