<project>
    <shortName>Xvid</shortName>
    <fullName>Xvid Video Codec</fullName>
    <version>1.3.1</version>
    <installerFilename>${product_shortname}-${product_version}-${platform_name}.${platform_exec_suffix}</installerFilename>
    <readmeFile>releasenotes.txt</readmeFile>
    <licenseFile>../../LICENSE</licenseFile>
    <logoImage>xvid.png</logoImage>
    <splashImage>Xvid_logo.png</splashImage>
    <initializationActionList>
        <registryGet>
            <key>HKEY_LOCAL_MACHINE\Software\${project.windowsSoftwareRegistryPrefix}</key>
            <name>Location</name>
            <variable>installdir</variable>
            <ruleList>
                <platformTest type="windows"/>
            </ruleList>
        </registryGet>
    </initializationActionList>
    <preInstallationActionList>
        <actionGroup>
            <actionList>
                <setInstallerVariable name="installationType" value="upgrade"/>
            </actionList>
            <ruleList>
                <fileTest condition="exists" path="${installdir}/update.ini"/>
            </ruleList>
        </actionGroup>
    </preInstallationActionList>
    <readyToInstallActionList>
        <runProgram>
            <abortOnError>0</abortOnError>
            <program>${installdir}/unins000.exe</program>
            <programArguments>/VERYSILENT</programArguments>
            <showMessageOnError>0</showMessageOnError>
            <workingDirectory>${installdir}/</workingDirectory>
            <ruleList>
                <fileTest condition="exists" path="${installdir}/unins000.exe"/>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </runProgram>
    </readyToInstallActionList>
    <postInstallationActionList>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${system_temp_directory}/xvid_x86/xvid.ax</destination>
            <origin>${system_temp_directory}/xvid_x86/xvid.ax_mft</origin>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <fileExists>
                    <path>${windows_folder_system}/mfplat.dll</path>
                </fileExists>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_system}/xvid.ax</destination>
            <origin>${system_temp_directory}/xvid_x86/xvid.ax</origin>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_system}/xvidcore.dll</destination>
            <origin>${system_temp_directory}/xvid_x86/xvidcore.dll</origin>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_system}/xvidvfw.dll</destination>
            <origin>${system_temp_directory}/xvid_x86/xvidvfw.dll</origin>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <runProgram>
            <customErrorMessage>Failed to install Xvid VfW Codec (32-bit)!</customErrorMessage>
            <program>${windows_folder_system}/rundll32.exe</program>
            <programArguments>setupapi.dll,InstallHinfSection DefaultInstall 0 ${system_temp_directory}/xvid_x86/xvid.inf</programArguments>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <runProgram>
            <customErrorMessage>DirectShow filter (32-bit) register failed!</customErrorMessage>
            <program>${windows_folder_system}/regsvr32.exe</program>
            <programArguments>/s ${windows_folder_system}/xvid.ax</programArguments>
            <workingDirectory>${windows_folder_system}</workingDirectory>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>Description</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>Xvid MPEG-4 Video Codec</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>Driver</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>xvidvfw.dll</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>FriendlyName</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>XVID</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\drivers.desc</key>
            <name>xvidvfw.dll</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>Xvid MPEG-4 Video Codec</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Drivers32</key>
            <name>vidc.XVID</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>xvidvfw.dll</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <wow64FsRedirection>
            <action>disable</action>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </wow64FsRedirection>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${system_temp_directory}/xvid_x64/xvid.ax</destination>
            <origin>${system_temp_directory}/xvid_x64/xvid.ax_mft</origin>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <fileExists>
                    <path>${windows_folder_windows}/system32/mfplat.dll</path>
                </fileExists>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_windows}/system32/xvid.ax</destination>
            <origin>${system_temp_directory}/xvid_x64/xvid.ax</origin>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_windows}/system32/xvidcore.dll</destination>
            <origin>${system_temp_directory}/xvid_x64/xvidcore.dll</origin>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <copyFile>
            <abortOnError>0</abortOnError>
            <destination>${windows_folder_windows}/system32/xvidvfw.dll</destination>
            <origin>${system_temp_directory}/xvid_x64/xvidvfw.dll</origin>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </copyFile>
        <runProgram>
            <customErrorMessage>Failed to install Xvid VfW Codec (64-bit)!</customErrorMessage>
            <program>${windows_folder_windows}/system32/rundll32.exe</program>
            <programArguments>setupapi.dll,InstallHinfSection DefaultInstall 0 ${system_temp_directory}/xvid_x64/xvid.inf</programArguments>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <runProgram>
            <customErrorMessage>DirectShow filter (64-bit) register failed!</customErrorMessage>
            <program>${windows_folder_windows}/system32/regsvr32.exe</program>
            <programArguments>/s ${windows_folder_windows}/system32/xvid.ax</programArguments>
            <workingDirectory>${windows_folder_windows}/system32</workingDirectory>
            <ruleList>
                <platformTest type="windows-x64"/>
            </ruleList>
        </runProgram>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>Description</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>Xvid MPEG-4 Video Codec</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>Driver</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>xvidvfw.dll</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\MediaResources\icm\vidc.XVID</key>
            <name>FriendlyName</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>XVID</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\drivers.desc</key>
            <name>xvidvfw.dll</name>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>Xvid MPEG-4 Video Codec</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Drivers32</key>
            <name>vidc.XVID</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>xvidvfw.dll</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <runProgram>
            <abortOnError>0</abortOnError>
            <program>${system_temp_directory}/xvid_x86/setpriv32.exe</program>
            <programArguments></programArguments>
            <showMessageOnError>0</showMessageOnError>
            <workingDirectory>${system_temp_directory}/xvid_x86</workingDirectory>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <runProgram>
            <abortOnError>0</abortOnError>
            <program>${system_temp_directory}/xvid_x64/setpriv64.exe</program>
            <programArguments></programArguments>
            <showMessageOnError>0</showMessageOnError>
            <workingDirectory>${system_temp_directory}/xvid_x64</workingDirectory>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <path>${system_temp_directory}/xvid_x64</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <path>${system_temp_directory}/xvid_x86</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <registrySet>
            <key>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run</key>
            <name>Xvid</name>
            <type>REG_SZ</type>
            <value>${installdir}\CheckUpdate.exe</value>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <compareText logic="equals" text="${AutoUpdate}" value="yes"/>
            </ruleList>
        </registrySet>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>58564944</name>
            <showMessageOnError>0</showMessageOnError>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registryDelete>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>78766964</name>
            <showMessageOnError>0</showMessageOnError>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registryDelete>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>58564944</name>
            <showMessageOnError>0</showMessageOnError>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
            </ruleList>
        </registryDelete>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Classes\MediaFoundation\MapVideo4cc</key>
            <name>78766964</name>
            <showMessageOnError>0</showMessageOnError>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
            </ruleList>
        </registryDelete>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DirectShow\Preferred</key>
            <name>{44495658-0000-0010-8000-00AA00389B71}</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>{083863F1-70DE-11D0-BD40-00A0C911CE86}</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DirectShow\Preferred</key>
            <name>{64697678-0000-0010-8000-00AA00389B71}</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>{083863F1-70DE-11D0-BD40-00A0C911CE86}</value>
            <wowMode>64</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DirectShow\Preferred</key>
            <name>{44495658-0000-0010-8000-00AA00389B71}</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>{083863F1-70DE-11D0-BD40-00A0C911CE86}</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
            </ruleList>
        </registrySet>
        <registrySet>
            <abortOnError>0</abortOnError>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DirectShow\Preferred</key>
            <name>{64697678-0000-0010-8000-00AA00389B71}</name>
            <showMessageOnError>0</showMessageOnError>
            <type>REG_SZ</type>
            <value>{083863F1-70DE-11D0-BD40-00A0C911CE86}</value>
            <wowMode>32</wowMode>
            <ruleList>
                <platformTest>
                    <type>windows-7</type>
                </platformTest>
            </ruleList>
        </registrySet>
    </postInstallationActionList>
    <preUninstallationActionList>
        <runProgram>
            <customErrorMessage>DirectShow filter (32-bit) unregister failed!</customErrorMessage>
            <program>${windows_folder_system}/regsvr32.exe</program>
            <programArguments>/s /u ${windows_folder_system}/xvid.ax</programArguments>
            <workingDirectory>${windows_folder_system}</workingDirectory>
            <ruleList>
                <platformTest type="windows"/>
            </ruleList>
        </runProgram>
        <runProgram>
            <customErrorMessage>Failed to remove Xvid VfW Codec (32-bit)!</customErrorMessage>
            <program>${windows_folder_system}/rundll32.exe</program>
            <programArguments>setupapi.dll,InstallHinfSection Remove_XviD 132 ${windows_folder_windows}/inf/xvid.inf</programArguments>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_system}/xvid.ax</path>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_system}/xvidvfw.dll</path>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_system}/xvidcore.dll</path>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-2000</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <wow64FsRedirection>
            <action>disable</action>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </wow64FsRedirection>
        <runProgram>
            <customErrorMessage>DirectShow filter (64-bit) unregister failed!</customErrorMessage>
            <program>${windows_folder_windows}/system32/regsvr32.exe</program>
            <programArguments>/s /u ${windows_folder_windows}/system32/xvid.ax</programArguments>
            <workingDirectory>${windows_folder_windows}/system32</workingDirectory>
            <ruleList>
                <platformTest type="windows-x64"/>
            </ruleList>
        </runProgram>
        <runProgram>
            <customErrorMessage>Failed to remove Xvid VfW Codec (64-bit)!</customErrorMessage>
            <program>${windows_folder_windows}/system32/rundll32.exe</program>
            <programArguments>setupapi.dll,InstallHinfSection Remove_XviD 132 ${installdir}/xvid.inf</programArguments>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <negate>1</negate>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_windows}/system32/xvid.ax</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_windows}/system32/xvidvfw.dll</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </deleteFile>
        <deleteFile>
            <abortOnError>0</abortOnError>
            <matchHiddenFiles>1</matchHiddenFiles>
            <path>${windows_folder_windows}/system32/xvidcore.dll</path>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </deleteFile>
    </preUninstallationActionList>
    <postUninstallationActionList>
        <registryDelete>
            <abortOnError>0</abortOnError>
            <key>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run</key>
            <name>Xvid</name>
            <showMessageOnError>0</showMessageOnError>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </ruleList>
        </registryDelete>
    </postUninstallationActionList>
    <compressionAlgorithm>lzma</compressionAlgorithm>
    <enableRollback>1</enableRollback>
    <enableTimestamp>1</enableTimestamp>
    <requireInstallationByRootUser>1</requireInstallationByRootUser>
    <saveRelativePaths>1</saveRelativePaths>
    <startMenuGroupName>${product_shortname}</startMenuGroupName>
    <updateInformationURL>http://downloads.xvid.org/downloads/update.xml</updateInformationURL>
    <vendor>Xvid Team</vendor>
    <versionId>131</versionId>
    <windowsExecutableIcon>xvid.ico</windowsExecutableIcon>
    <componentList>
        <component>
            <name>default</name>
            <description>Default Component</description>
            <canBeEdited>1</canBeEdited>
            <selected>1</selected>
            <show>1</show>
            <folderList>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}</destination>
                    <name>programfiles</name>
                    <platforms>all</platforms>
                    <shortcutList>
                        <shortcut>
                            <comment>Uninstall</comment>
                            <exec>${installdir}/${uninstallerName}</exec>
                            <icon></icon>
                            <name>Uninstall ${product_fullname}</name>
                            <path>${installdir}</path>
                            <platforms>all</platforms>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsExec>${installdir}/${uninstallerName}.exe</windowsExec>
                            <windowsExecArgs></windowsExecArgs>
                            <windowsIcon></windowsIcon>
                            <windowsPath>${installdir}</windowsPath>
                        </shortcut>
                    </shortcutList>
                </folder>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}</destination>
                    <name>programfileslinux</name>
                    <platforms>linux</platforms>
                </folder>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}</destination>
                    <name>programfileswindows</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>../src/xvid.ico</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>AviC.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../LICENSE</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>MiniCalc.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>OGMCalc.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>releasenotes.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>vidccleaner.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>Xvid_Quant_Matrices.zip</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>StatsReader.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>statsreader.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid.inf</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid.ico</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>autoupdate-windows.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>update.ini</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>CheckUpdate.exe</origin>
                        </distributionFile>
                    </distributionFileList>
                    <shortcutList>
                        <linkShortcut>
                            <comment>Xvid support forum on doom9</comment>
                            <icon></icon>
                            <name>doom9forum</name>
                            <platforms>windows</platforms>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <url>http://forum.doom9.org/forumdisplay.php?s=&amp;forumid=52</url>
                            <windowsIcon></windowsIcon>
                        </linkShortcut>
                        <linkShortcut>
                            <comment>Xvid Website</comment>
                            <icon></icon>
                            <name>xvidhomepage</name>
                            <platforms>windows</platforms>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <url>http://www.xvid.org/</url>
                            <windowsIcon></windowsIcon>
                        </linkShortcut>
                    </shortcutList>
                </folder>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}</destination>
                    <name>programfilesosx</name>
                    <platforms>osx</platforms>
                </folder>
                <folder>
                    <description>Temp Directory (x86)</description>
                    <destination>${system_temp_directory}/xvid_x86</destination>
                    <name>tmp_x86</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>../bin/xvidvfw.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../bin/xvidcore.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid.inf</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../dshow/bin/xvid.ax</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>setpriv32.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../dshow/bin/xvid.ax_mft</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>Temp Directory (x64)</description>
                    <destination>${system_temp_directory}/xvid_x64</destination>
                    <name>tmp_x64</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>../../dshow/bin/x64/xvid.ax</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../bin/x64/xvidcore.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../bin/x64/xvidvfw.dll</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>xvid.inf</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>setpriv64.exe</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../../dshow/bin/x64/xvid.ax_mft</origin>
                        </distributionFile>
                    </distributionFileList>
                    <ruleList>
                        <platformTest type="windows-x64"/>
                    </ruleList>
                </folder>
            </folderList>
            <startMenuShortcutList>
                <startMenuShortcut>
                    <comment>Uninstall ${product_fullname}</comment>
                    <name>Uninstall ${product_fullname}</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/${uninstallerName}.exe</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon></windowsIcon>
                    <windowsPath>${installdir}/</windowsPath>
                </startMenuShortcut>
                <startMenuShortcut>
                    <comment>Configure the Decoder properties</comment>
                    <name>Configure Decoder</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${windows_folder_system}/rundll32.exe</windowsExec>
                    <windowsExecArgs>xvid.ax,Configure</windowsExecArgs>
                    <windowsIcon>${installdir}/xvid.ico</windowsIcon>
                    <windowsPath></windowsPath>
                </startMenuShortcut>
                <startMenuShortcut>
                    <comment>Configure the encoder properties</comment>
                    <name>Configure Encoder</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${windows_folder_system}/rundll32.exe</windowsExec>
                    <windowsExecArgs>xvidvfw.dll,Configure</windowsExecArgs>
                    <windowsIcon>${installdir}/xvid.ico</windowsIcon>
                    <windowsPath></windowsPath>
                </startMenuShortcut>
                <startMenuShortcut>
                    <comment>Change the FourCC of your avi files</comment>
                    <name>Nic's FourCC Changer</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/AviC.exe</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon></windowsIcon>
                    <windowsPath>${installdir}/</windowsPath>
                </startMenuShortcut>
                <startMenuFileShortcut>
                    <comment>Important notes concerning this Xvid build</comment>
                    <filePath>${installdir}/releasenotes.txt</filePath>
                    <name>Release Notes</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsIcon></windowsIcon>
                </startMenuFileShortcut>
                <startMenuFileShortcut>
                    <comment>A selection of custom quant matrices</comment>
                    <filePath>${installdir}/Xvid_Quant_Matrices.zip</filePath>
                    <name>Some Quantization Matrices</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsIcon></windowsIcon>
                </startMenuFileShortcut>
                <startMenuShortcut>
                    <comment>Check the first pass size and more</comment>
                    <name>StatsReader 2.1</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/StatsReader.exe</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon></windowsIcon>
                    <windowsPath>${installdir}/</windowsPath>
                </startMenuShortcut>
                <startMenuFileShortcut>
                    <comment>Documentation for the StatsReader</comment>
                    <filePath>${installdir}/statsreader.txt</filePath>
                    <name>StatsReader Notes</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsIcon></windowsIcon>
                </startMenuFileShortcut>
                <startMenuShortcut>
                    <comment>Check whether a new update for Xvid is available</comment>
                    <name>Check for Updates</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/autoupdate-windows.exe</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon></windowsIcon>
                    <windowsPath>${installdir}/</windowsPath>
                </startMenuShortcut>
                <startMenuLinkShortcut>
                    <comment>Link to the Xvid homepage</comment>
                    <name>Xvid Homepage</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <url>http://www.xvid.org</url>
                    <windowsIcon></windowsIcon>
                </startMenuLinkShortcut>
            </startMenuShortcutList>
        </component>
    </componentList>
    <parameterList>
        <directoryParameter>
            <name>installdir</name>
            <description>Installer.Parameter.installdir.description</description>
            <explanation>Installer.Parameter.installdir.explanation</explanation>
            <value></value>
            <default>${platform_install_prefix}/${product_shortname}</default>
            <allowEmptyValue>0</allowEmptyValue>
            <cliOptionName>prefix</cliOptionName>
            <mustBeWritable>1</mustBeWritable>
            <mustExist>0</mustExist>
            <width>40</width>
        </directoryParameter>
        <choiceParameter>
            <ask>yes</ask>
            <ruleList>
                <registryTest>
                  <key>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run</key>
                  <logic>does_not_exist</logic>
                  <name>Xvid</name>
                </registryTest>
            </ruleList>
            <default>yes</default>
            <explanation>Do you want to automatically check for updates?</explanation>
            <title>Update Settings</title>
            <name>AutoUpdater</name>
            <displayType>radiobuttons</displayType>
            <optionList>
              <option>
                <value>yes</value>
                <text>Yes, automatically notify me when updates are available.</text>
              </option>
              <option>
                <value>no</value>
                <text>No, I want to check for updates manually.</text>
              </option>
            </optionList>
            <postShowPageActionList>
              <setInstallerVariable>
                <name>AutoUpdate</name>
                <value>${AutoUpdater}</value>
              </setInstallerVariable>
            </postShowPageActionList>
        </choiceParameter>
    </parameterList>
    <platformOptionsList>
        <platformOptions>
            <platform>windows</platform>
        </platformOptions>
    </platformOptionsList>
</project>

